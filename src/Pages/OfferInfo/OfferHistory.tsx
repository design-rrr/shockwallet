import * as Icons from "../../Assets/SvgIconLibrary";
import { useState } from "react";
import * as Types from '../../Api/pub/autogenerated/ts/types'
import Checkbox from "../../Components/Checkbox";
type OfferItemType = {
    title: string;
    value: string;
    type: string;
};
type Props = { history: Types.OfferInvoice[], showUnpaid: boolean, setShowUnpaid: (b: boolean) => void }
export const OfferHistory = ({ history, setShowUnpaid, showUnpaid }: Props) => {

    return (
        <div style={{ textAlign: 'center', border: '1px solid grey', padding: '20px 10%', borderRadius: '10px' }}>
            <div>
                <p>Offer History</p>
                <div style={{ height: 1, backgroundColor: 'grey', width: '100%', margin: '10px 0px' }} ></div>
                <div>
                    <label>Show unpaid invoices: </label>
                    <Checkbox id="check" state={showUnpaid} setState={(e) => { setShowUnpaid(e.target.checked) }} inline={true} />
                </div>
                {history.map((invoice, i) => <div key={i} style={{ border: `1px solid ${invoice.paid_at_unix > 0 ? '#2aabe1' : 'grey'}`, padding: '10px', borderRadius: '10px', marginTop: '20px' }}>
                    <p>Invoice: {invoice.invoice.slice(0, 30)}...</p>
                    {invoice.paid_at_unix > 0 && <>
                        <p>+{invoice.amount}sats</p>
                        <p>at: {new Date(invoice.paid_at_unix * 1000).toLocaleString()}</p>
                        <p>Payer Data:</p>
                        {Object.keys(invoice.data).map((d, i) => <div key={i}><span>{d}: </span>{invoice.data[d]}</div>)}
                    </>}
                    {invoice.paid_at_unix <= 0 && <p>Unpaid</p>}
                </div>)}
            </div>
        </div>
    );
};
